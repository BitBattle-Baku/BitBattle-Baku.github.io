<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BitBattle | Global Arena</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Poppins:wght@300;500;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #02050a; --panel: rgba(11, 17, 29, 0.85); --neon-blue: #00f2ff; --neon-pink: #ff00ff; --neon-green: #39ff14; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            background: #000 url('https://r.resimlink.com/5S9vXzO.png') no-repeat center center fixed; 
            background-size: cover;
            min-height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-family: 'Poppins', sans-serif; 
            color: white; 
            overflow-x: hidden; 
            padding: 20px; 
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(0, 242, 255, 0.4); } 70% { box-shadow: 0 0 0 15px rgba(0, 242, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 242, 255, 0); } }
        @keyframes giftBounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

        .card { 
            background: var(--panel); 
            backdrop-filter: blur(12px);
            padding: 40px; border-radius: 30px; border: 2px solid var(--neon-blue); 
            width: 100%; max-width: 420px; text-align: center; 
            box-shadow: 0 0 40px rgba(0, 242, 255, 0.15); position: relative; z-index: 5;
            animation: fadeIn 0.5s ease-out;
        }

        /* GÃ¼ndÉ™lik HÉ™diyyÉ™ DÃ¼ymÉ™si */
        .gift-btn {
            background: linear-gradient(45deg, #ff00ff, #800080);
            border: 1px solid white;
            color: white;
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 0.7rem;
            cursor: pointer;
            margin-bottom: 15px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            animation: giftBounce 2s infinite;
        }

        .side-leaderboard { 
            position: fixed; right: 20px; top: 50%; transform: translateY(-50%); 
            width: 280px; background: rgba(11, 17, 29, 0.9); 
            backdrop-filter: blur(8px); border: 2px solid var(--neon-pink); padding: 15px; border-radius: 15px; 
            max-height: 90vh; display: flex; flex-direction: column; z-index: 10; 
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.2); 
        }

        .leader-list { overflow-y: auto; flex-grow: 1; max-height: 180px; margin-bottom: 10px; }
        .leader-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1); font-size: 0.8rem; }
        .vip-tag { color: var(--neon-green); font-weight: bold; font-size: 0.6rem; margin-left: 5px; border: 1px solid; padding: 1px 3px; border-radius: 3px; }

        .chat-container { border-top: 2px solid var(--neon-blue); padding-top: 10px; display: flex; flex-direction: column; height: 250px; }
        #chat-messages { flex-grow: 1; overflow-y: auto; font-size: 0.75rem; margin-bottom: 10px; padding-right: 5px; text-align: left; }
        .chat-msg { margin-bottom: 5px; line-height: 1.2; }
        .chat-user { font-weight: bold; color: var(--neon-blue); }
        .chat-input-area { display: flex; gap: 5px; }
        .chat-input-area input { margin-bottom: 0 !important; padding: 8px !important; font-size: 0.75rem !important; background: rgba(0,0,0,0.4) !important; border: 1px solid #333 !important; }
        .chat-send { background: var(--neon-blue); color: black; border: none; padding: 0 10px; border-radius: 5px; cursor: pointer; font-weight: bold; }

        h1 { font-family: 'Orbitron', sans-serif; color: var(--neon-blue); margin-bottom: 25px; text-shadow: 0 0 10px var(--neon-blue); }
        .btn { width: 100%; padding: 14px; margin: 10px 0; border: none; border-radius: 10px; background: linear-gradient(45deg, var(--neon-blue), var(--neon-pink)); color: white; font-weight: 900; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        .btn:hover { transform: scale(1.02); filter: brightness(1.2); }
        .pulse-btn { animation: pulse 2s infinite; }
        .btn-wa { background: #25D366 !important; box-shadow: 0 0 15px #25D366; }
        input { width: 100%; padding: 12px; background: rgba(21, 28, 44, 0.6); border: 1px solid var(--neon-blue); color: white; border-radius: 8px; margin-bottom: 15px; text-align: center; outline: none; }
        .hidden { display: none !important; }
        .id-display { color: var(--neon-green); font-weight: bold; font-family: monospace; border: 1px dashed var(--neon-green); padding: 5px 15px; margin: 10px 0; display: inline-block; }
        .opt-btn { width: 100%; padding: 12px; margin-bottom: 8px; background: rgba(26, 36, 58, 0.7); border: 1px solid var(--neon-blue); color: white; border-radius: 8px; cursor: pointer; transition: 0.2s; }
        .opt-btn:hover { background: rgba(0, 242, 255, 0.2); }
        .rank-tag { font-size: 0.7rem; padding: 2px 8px; border-radius: 10px; margin-left: 5px; vertical-align: middle; }

        /* GÄ°ZLÄ° ADMÄ°N KEÃ‡Ä°DÄ° - SAÄ ALT KÃœNC */
        .footer-trigger { 
            position: fixed; bottom: 10px; right: 10px; 
            font-size: 0.6rem; color: var(--neon-blue); 
            cursor: pointer; opacity: 0.15; z-index: 100;
        }

        @media (max-width: 850px) {
            body { flex-direction: column; overflow-y: auto; justify-content: flex-start; padding-top: 20px; background-attachment: scroll; }
            .side-leaderboard { position: relative; right: auto; top: auto; transform: none; width: 100%; max-width: 420px; margin-top: 20px; order: 2; }
            .card { order: 1; }
        }
    </style>
</head>
<body>

    <div class="card" id="scr-auth">
        <h1>BIT BATTLE</h1>
        <div id="auth-reg">
            <input type="text" id="reg-name" placeholder="DÃ¶yÃ¼ÅŸÃ§Ã¼ AdÄ±">
            <button class="btn" onclick="register()">Qeydiyyatdan KeÃ§</button>
            <p style="font-size: 0.8rem; margin-top: 10px;">ID var? <a href="#" onclick="toggleAuth(true)" style="color: var(--neon-blue);">GiriÅŸ</a></p>
        </div>
        <div id="auth-login" class="hidden">
            <input type="text" id="login-id" placeholder="MÉ™s: BIT-1234">
            <button class="btn" onclick="login()">Daxil Ol</button>
            <p style="font-size: 0.8rem; margin-top: 10px;"><a href="#" onclick="toggleAuth(false)" style="color: var(--neon-blue);">Qeydiyyat</a></p>
        </div>
    </div>

    <div class="card hidden" id="scr-dash">
        <p style="font-size: 0.75rem;">Status: <span id="u-rank" class="rank-tag">Pilot</span></p>
        <div class="id-display" id="u-id">...</div>
        <h2 id="u-welcome" style="margin: 10px 0; font-family:'Orbitron';">Pilot</h2>

        <button id="gift-trigger" class="gift-btn" onclick="claimDailyBonus()">
            ğŸ GÃœNDÆLÄ°K BONUS
        </button>

        <div style="display: flex; justify-content: space-around; margin: 20px 0; border-top: 1px solid #222; padding-top: 15px;">
            <span>BIT: <b id="u-bits" style="color:var(--neon-blue)">0</b></span>
            <span>Limit: <b id="u-limit" style="color:var(--neon-pink)">2/2</b></span>
        </div>
        <div id="btn-container"></div>
    </div>

    <div class="card hidden" id="scr-game">
        <div id="timer" style="font-size: 2.5rem; color: var(--neon-green); font-family: 'Orbitron';">10</div>
        <p id="q-text" style="margin: 25px 0; font-size: 1.1rem; min-height: 60px; font-weight: 500;"></p>
        <div id="q-opts"></div>
    </div>

    <div class="card hidden" id="scr-admin">
        <h2 style="color:red; font-family:'Orbitron';">SÄ°STEM ADMÄ°N</h2>
        <p id="admin-count" style="font-size: 0.8rem; color: #aaa; margin-bottom: 10px;">YÃ¼klÉ™nir...</p>
        <input type="password" id="admin-pass" placeholder="ÅifrÉ™">
        <button class="btn" onclick="checkAdmin()">Yoxla</button>
        <div id="admin-tools" class="hidden">
            <input type="text" id="target-id" placeholder="Ä°stifadÉ™Ã§i ID">
            <button class="btn" style="background:green" onclick="makeVIP()">VIP ET</button>
            <button onclick="show('scr-dash')" class="btn" style="background:gray">Geri</button>
        </div>
    </div>

    <div class="side-leaderboard">
        <h3 style="font-family:'Orbitron'; font-size: 0.8rem; color: var(--neon-pink); text-align: center; margin-bottom: 10px;">GLOBAL TOP 10</h3>
        <div class="leader-list" id="leader-list">...</div>
        <br>
        <div class="chat-container">
            <h4 style="font-size: 0.7rem; color: var(--neon-blue); margin-bottom: 5px;">CANLI Ã‡AT</h4>
            <div id="chat-messages"></div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="Yaz...">
                <button class="chat-send" onclick="sendMsg()">></button>
            </div>
        </div>
        <button onclick="logout()" style="background:none; border:none; color:#ff4444; cursor:pointer; font-size:0.6rem; margin-top:10px;">Ã‡Ä±xÄ±ÅŸ</button>
    </div>

    <div class="footer-trigger" onclick="adminClick()">ismayilovismayil</div>

    <script>
        const sfx = {
            correct: new Audio('https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3'),
            wrong: new Audio('https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3')
        };

        const firebaseConfig = {
            apiKey: "AIzaSyBDez5-5JBRKWruTeRQ5GmMCX9we0iP00",
            authDomain: "bitbattle-64c13.firebaseapp.com",
            databaseURL: "https://bitbattle-64c13-default-rtdb.firebaseio.com",
            projectId: "bitbattle-64c13",
            storageBucket: "bitbattle-64c13.firebasestorage.app",
            messagingSenderId: "735228613710",
            appId: "1:735228613710:web:14a6cee6f896ceffc11f1f",
            measurementId: "G-S7LPFQ9JCW"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const questions = [
            { q: "HansÄ± tÉ™rÉ™zi ilÉ™ Ã§É™ki Ã§É™kmÉ™k olmaz?", o: ["MÉ™tbÉ™x", "BÃ¼rclÉ™r", "Elektron", "Mexaniki"], c: 1 },
            { q: "MÉ™n danÄ±ÅŸmÄ±ram, amma hÉ™r ÅŸeyÉ™ cavab verirÉ™m. NÉ™yÉ™m?", o: ["GÃ¼zgÃ¼", "Kitab", "Æks-sÉ™da", "KÃ¼lÉ™k"], c: 2 },
            { q: "Bir ailÉ™dÉ™ 7 bacÄ± var, hÉ™r birinin bir qardaÅŸÄ± var. CÉ™mi neÃ§É™ uÅŸaq var?", o: ["7", "8", "14", "15"], c: 1 },
            { q: "NÉ™ qÉ™dÉ™r Ã§ox gÃ¶tÃ¼rsÉ™n, o qÉ™dÉ™r bÃ¶yÃ¼yÉ™r?", o: ["Borc", "Ã‡ala", "Bilik", "YÃ¼k"], c: 1 },
            { q: "HansÄ± ayda 28 gÃ¼n var?", o: ["Fevral", "Yanvar", "BÃ¼tÃ¼n aylar", "HeÃ§ biri"], c: 2 },
            { q: "AtanÄ±n 35, oÄŸlunun 7 yaÅŸÄ± var. NeÃ§É™ ildÉ™n sonra ata oÄŸlundan 3 dÉ™fÉ™ bÃ¶yÃ¼k olar?", o: ["5", "7", "8", "10"], c: 1 },
            { q: "1-dÉ™n 100-É™ qÉ™dÉ™r neÃ§É™ dÉ™nÉ™ 9 rÉ™qÉ™mi var?", o: ["10", "11", "19", "20"], c: 3 },
            { q: "HansÄ± sÃ¶z digÉ™rlÉ™rindÉ™n fÉ™rqlidir?", o: ["Alma", "Armud", "KÃ¶k", "Gilas"], c: 2 },
            { q: "Kitab - MÃ¼É™llif, Film - ?", o: ["Aktyor", "Rejissor", "Ssenari", "Kamera"], c: 1 },
            { q: "Onu yemÉ™k olar, amma Ã¶zÃ¼ yeyÉ™ bilmÉ™z. NÉ™dir?", o: ["BoÅŸqab", "Ã‡Ã¶rÉ™k", "Su", "QaÅŸÄ±q"], c: 0 },
            { q: "GecÉ™-gÃ¼ndÃ¼z hÉ™rÉ™kÉ™t edir, amma yerindÉ™n tÉ™rpÉ™nmir?", o: ["Saat", "Ã‡ay", "KÃ¼lÉ™k", "Yol"], c: 0 },
            { q: "AyaÄŸÄ± yoxdur qaÃ§Ä±r, qanadÄ± yoxdur uÃ§ur, dili yoxdur aÄŸlayÄ±r?", o: ["KÃ¼lÉ™k", "Bulud", "Duman", "YaÄŸÄ±ÅŸ"], c: 1 },
            { q: "NÉ™dir ki, baÅŸÄ± var, beyni yoxdur?", o: ["Mismar", "Sancaq", "SoÄŸan", "KÉ™lÉ™m"], c: 2 },
            { q: "HansÄ± suala 'hÉ™' cavabÄ± vermÉ™k mÃ¼mkÃ¼n deyil?", o: ["AcÄ±rsan?", "YatÄ±rsan?", "Yorulubsan?", "GÃ¶rÃ¼rsÉ™n?"], c: 1 },
            { q: "SÉ™hÉ™r-sÉ™hÉ™r nÉ™yi yemÉ™k olmaz?", o: ["NaharÄ±", "YemÉ™yi", "Ã‡ayÄ±", "Yuxunu"], c: 0 },
            { q: "AÄŸzÄ± var, dili yoxdur, canÄ± yoxdur, nÉ™fÉ™si var?", o: ["TÃ¼fÉ™ng", "Fleyta", "KÃ¼lÉ™k", "Balon"], c: 0 },
            { q: "Onu hamÄ± gÃ¶rÃ¼r, amma TanrÄ± heÃ§ vaxt gÃ¶rmÃ¼r?", o: ["Ä°nsan", "PeyÄŸÉ™mplÉ™r", "BÉ™rabÉ™rini", "GÉ™lÉ™cÉ™yi"], c: 2 },
            { q: "Bir adam yaÄŸÄ±ÅŸÄ±n altÄ±nda qalÄ±r, amma saÃ§larÄ± islanmÄ±r. NiyÉ™?", o: ["Ã‡É™tiri var", "PapaÄŸÄ± var", "KeÃ§É™ldir", "QaÃ§Ä±r"], c: 2 },
            { q: "HansÄ± qabdan yemÉ™k yemÉ™k olmaz?", o: ["BoÅŸ qabdan", "SÄ±nÄ±q qabdan", "Dolu qabdan", "Ã‡irkli qabdan"], c: 0 },
            { q: "Onu hamÄ± saxlayÄ±r, amma heÃ§ kim gÃ¶rmÃ¼r?", o: ["SÃ¶zÃ¼", "NÉ™fÉ™si", "Sirri", "CanÄ±"], c: 1 },
            { q: "2, 6, 12, 20, ? ArdÄ±cÄ±llÄ±ÄŸÄ± tamamlayÄ±n.", o: ["24", "26", "30", "32"], c: 2 },
            { q: "ÃœÃ§ ardÄ±cÄ±l É™dÉ™din cÉ™mi 33-dÃ¼r. Æn bÃ¶yÃ¼yÃ¼ neÃ§É™dir?", o: ["10", "11", "12", "13"], c: 2 },
            { q: "ÆqrÉ™blÉ™r saat 03:15-dÉ™ neÃ§É™ dÉ™rÉ™cÉ™lik bucaq É™mÉ™lÉ™ gÉ™tirir?", o: ["0", "7.5", "15", "90"], c: 1 },
            { q: "6 nÉ™fÉ™r bir-biri ilÉ™ É™l sÄ±xÄ±ÅŸÄ±rsa, cÉ™mi neÃ§É™ É™l sÄ±xma olar?", o: ["12", "15", "18", "21"], c: 1 },
            { q: "HÉ™r 5 dÉ™qiqÉ™dÉ™ bir ikiyÉ™ bÃ¶lÃ¼nÉ™n bakteriya, 1 saatda neÃ§É™ dÉ™fÉ™ bÃ¶lÃ¼nÉ™r?", o: ["6", "10", "12", "60"], c: 2 },
            { q: "DÃ¼nyanÄ±n É™n hÃ¼ndÃ¼r zirvÉ™si hansÄ±dÄ±r?", o: ["Everest", "Elbrus", "Qazbek", "ÅahdaÄŸ"], c: 0 },
            { q: "HansÄ± okeanÄ±n sahÉ™si É™n bÃ¶yÃ¼kdÃ¼r?", o: ["Atlantik", "Hind", "Sakit", "Åimal Buzlu"], c: 2 },
            { q: "AzÉ™rbaycanÄ±n É™n uzun Ã§ayÄ± hansÄ±dÄ±r?", o: ["Araz", "KÃ¼r", "Samur", "TÉ™rtÉ™r"], c: 1 },
            { q: "HansÄ± Ã¶lkÉ™ 'GÃ¼ndoÄŸan Ã¶lkÉ™' adlanÄ±r?", o: ["Ã‡in", "Koreya", "Yaponiya", "Vyetnam"], c: 2 },
            { q: "GÃ¼nÉ™ÅŸ sistemindÉ™ É™n bÃ¶yÃ¼k planet hansÄ±dÄ±r?", o: ["Mars", "Saturn", "Yupiter", "Neptun"], c: 2 },
            { q: "YÃ¼z il yaÅŸayan aÄŸacÄ±n yarpaqlarÄ± nÉ™ rÉ™ng olur?", o: ["YaÅŸÄ±l", "QÉ™hvÉ™yi", "SarÄ±", "Quru"], c: 0 },
            { q: "YalnÄ±z tÉ™k rÉ™qÉ™mlÉ™rdÉ™n ibarÉ™t É™n bÃ¶yÃ¼k iki rÉ™qÉ™mli É™dÉ™d?", o: ["91", "97", "99", "89"], c: 2 },
            { q: "SÄ±fÄ±rdan fÉ™rqli É™dÉ™di Ã¶zÃ¼nÉ™ bÃ¶ldÃ¼kdÉ™ nÉ™ alÄ±nÄ±r?", o: ["0", "1", "Ã–zÃ¼", "Sonsuz"], c: 1 },
            { q: "ArdÄ±cÄ±llÄ±ÄŸÄ± tamamla: 1, 8, 27, 64, ?", o: ["100", "121", "125", "150"], c: 2 },
            { q: "ÆlifbamÄ±zda neÃ§É™ sait var?", o: ["7", "8", "9", "10"], c: 2 },
            { q: "HÉ™m meyvÉ™dir, hÉ™m dÉ™ rÉ™ng?", o: ["Nar", "Limon", "PortaÄŸal", "Banan"], c: 2 },
            { q: "Su neÃ§É™ dÉ™rÉ™cÉ™dÉ™ donur?", o: ["-1", "0", "1", "4"], c: 1 },<br>            { q: "HansÄ± metal otaq temperaturunda maye halÄ±ndadÄ±r?", o: ["QurÄŸuÅŸun", "CivÉ™", "Qalay", "Mis"], c: 1 },<br>            { q: "Bir kilo pambÄ±q aÄŸÄ±rdÄ±r, yoxsa bir kilo dÉ™mir?", o: ["PambÄ±q", "DÉ™mir", "BÉ™rabÉ™rdir", "HÉ™cmÉ™ baÄŸlÄ±dÄ±r"], c: 2 },<br>            { q: "Åahmat taxtasÄ±nda neÃ§É™ xana var?", o: ["32", "60", "64", "100"], c: 2 },<br>            { q: "Bir aÄŸacÄ±n 10 budaÄŸÄ± var, hÉ™r budaqda 10 quÅŸ var. CÉ™mi neÃ§É™ quÅŸ var?", o: ["10", "100", "1000", "110"], c: 1 },<br>            { q: "HansÄ± tÉ™k rÉ™qÉ™mli É™dÉ™di 2-yÉ™ vurduqda 2 rÉ™qÉ™mli É™dÉ™d alÄ±nmÄ±r?", o: ["4", "5", "6", "7"], c: 0 },<br>            { q: "YarÄ±sÄ± 5 olan É™dÉ™din 3 qatÄ± neÃ§É™dir?", o: ["15", "25", "30", "45"], c: 2 },<br>            { q: "MÉ™nim 3 almam var, sÉ™n mÉ™nÉ™ 2-sini verdin. Ä°ndi mÉ™nim neÃ§É™ almam var?", o: ["2", "3", "5", "1"], c: 1 },<br>            { q: "HansÄ± rÉ™qÉ™min adÄ± ilÉ™ yazÄ±lÄ±ÅŸÄ± eyni sayda hÉ™rfdÉ™n ibarÉ™tdir?", o: ["1", "3", "4", "6"], c: 2 },<br>            { q: "Divarda 5 milÃ§É™k var idi, 2-sini Ã¶ldÃ¼rdÃ¼lÉ™r. Divarda neÃ§É™ milÃ§É™k qaldÄ±?", o: ["0", "2", "3", "5"], c: 1 },<br>            { q: "HansÄ± heyvanÄ±n adÄ± 2 hÉ™rfdÉ™n ibarÉ™tdir?", o: ["At", "Ä°t", "Fil", "AyÄ±"], c: 0 },<br>            { q: "GÃ¼ndÃ¼zlÉ™r yatÄ±r, gecÉ™lÉ™r uÃ§ur, amma quÅŸ deyil?", o: ["Yarasa", "BayquÅŸ", "KÉ™pÉ™nÉ™k", "ArÄ±"], c: 0 },<br>            { q: "HansÄ± suala 'Xeyr' cavabÄ± vermÉ™k mÃ¼mkÃ¼n deyil?", o: ["Acsan?", "SaÄŸsan?", "GÃ¶rÃ¼rsÉ™n?", "GedirsÉ™n?"], c: 1 },<br>            { q: "NÉ™dir ki, hamÄ±dan É™vvÉ™l evÉ™ girir?", o: ["AÃ§ar", "Ä°ÅŸÄ±q", "PiÅŸik", "KÃ¼lÉ™k"], c: 0 },<br>            { q: "KompÃ¼terin 'beyni' hansÄ± hissÉ™dir?", o: ["RAM", "Monitor", "Prosessor", "Klaviatura"], c: 2 },<br>            { q: "DÃ¼nyanÄ±n ilk proqramÃ§Ä±sÄ± kim olub?", o: ["Bill Gates", "Elon Musk", "Ada Lovelace", "Mark Zuckerberg"], c: 2 },<br>            { q: "Bit nÉ™yin qÄ±saltmasÄ±dÄ±r?", o: ["Big IT", "Binary Digit", "Basic Tool", "Binary Inter"], c: 1 },<br>            { q: "HansÄ± proqramlaÅŸdÄ±rma dili daha qÉ™dimdir?", o: ["Python", "C++", "Java", "JavaScript"], c: 1 },<br>            { q: "URL nÉ™dir?", o: ["ÅÉ™kil", "Ä°nternet Ã¼nvanÄ±", "Fayl", "Virus"], c: 1 },<br>            { q: "DÉ™dÉ™ Qorqud boylarÄ±nda neÃ§É™ boy var?", o: ["10", "12", "15", "20"], c: 1 },<br>            { q: "ÅuÅŸa ili neÃ§É™nci il elan olunmuÅŸdu?", o: ["2020", "2021", "2022", "2023"], c: 2 },<br>            { q: "AzÉ™rbaycanÄ±n ilk paytaxtÄ± haradÄ±r?", o: ["GÉ™ncÉ™", "TÉ™briz", "BakÄ±", "QÉ™dim QÉ™bÉ™lÉ™"], c: 3 },<br>            { q: "QÄ±z qalasÄ± hansÄ± ÅŸÉ™hÉ™dÉ™ yerlÉ™ÅŸir?", o: ["GÉ™ncÉ™", "BakÄ±", "NaxÃ§Ä±van", "LÉ™nkÉ™ran"], c: 1 },<br>            { q: "HansÄ± alÉ™t AzÉ™rbaycanÄ±n milli musiqi alÉ™tidir?", o: ["Gitara", "Tar", "Skripka", "Pianino"], c: 1 },<br>            { q: "15 x 4 + 10 = ?", o: ["60", "70", "80", "100"], c: 1 },<br>            { q: "100-Ã¼n 10%-i neÃ§É™dir?", o: ["1", "5", "10", "20"], c: 2 },<br>            { q: "HansÄ± É™dÉ™d hÉ™m tÉ™kdir, hÉ™m dÉ™ cÃ¼t?", o: ["0", "1", "2", "HeÃ§ biri"], c: 3 },<br>            { q: "Bir sutka neÃ§É™ saniyÉ™dir?", o: ["3600", "24000", "86400", "60000"], c: 2 },<br>            { q: "KvadratÄ±n neÃ§É™ tÉ™rÉ™fi var?", o: ["3", "4", "5", "6"], c: 1 },<br>            { q: "HansÄ± rÉ™qÉ™m Roma rÉ™qÉ™mlÉ™ri sistemindÉ™ mÃ¶vcud deyil?", o: ["I", "V", "X", "0"], c: 3 },<br>            { q: "DÃ¼nyanÄ±n É™n uzun sahil xÉ™ttinÉ™ malik Ã¶lkÉ™si hansÄ±dÄ±r?", o: ["Rusiya", "Kanada", "Avstraliya", "ABÅ"], c: 1 },<br>            { q: "Åahmatda 'En Passant' gediÅŸi hansÄ± fiqura aiddir?", o: ["At", "Piyada", "Fil", "Åah"], c: 1 },<br>            { q: "Ä°ÅŸÄ±q sÃ¼rÉ™ti tÉ™xminÉ™n saniyÉ™dÉ™ neÃ§É™ kilometrdir?", o: ["150.000", "200.000", "300.000", "400.000"], c: 2 },<br>            { q: "Ä°nsan bÉ™dÉ™nindÉ™ki É™n kiÃ§ik sÃ¼mÃ¼k haradadÄ±r?", o: ["Burun", "Qulaq", "Barmaq", "Diz"], c: 1 },<br>            { q: "HansÄ± elementin kimyÉ™vi simvolu 'W'-dir?", o: ["QÄ±zÄ±l", "DÉ™mir", "Volfram", "GÃ¼mÃ¼ÅŸ"], c: 2 },<br>            { q: "Ä°lk kompÃ¼ter proqramÃ§Ä±sÄ± kim hesab olunur?", o: ["Marie Curie", "Ada Lovelace", "Grace Hopper", "Hedy Lamarr"], c: 1 },<br>            { q: "DÃ¼nyada É™n Ã§ox dildÉ™ danÄ±ÅŸÄ±lan Ã¶lkÉ™ hansÄ±dÄ±r?", o: ["Hindistan", "Ã‡in", "Papua Yeni Qvineya", "Braziliya"], c: 2 },<br>            { q: "Vatikan dÃ¶vlÉ™tinin rÉ™smi dili hansÄ±dÄ±r?", o: ["Ä°talyan", "LatÄ±n", "FransÄ±z", "Ä°span"], c: 1 },<br>            { q: "GÃ¼nÉ™ÅŸ sistemindÉ™ Ã¶z oxu É™trafÄ±nda É™n sÃ¼rÉ™tli fÄ±rlanan planet?", o: ["Yupiter", "Mars", "Yer", "Merkuri"], c: 0 }
        ];

        let currentUser = null;
        let adminClicks = 0;
        let gameTimer;

        function getRank(bits) {
            if(bits >= 5000) return { name: "ÆfsanÉ™", color: "#ff0000" };
            if(bits >= 1000) return { name: "Master", color: "#ffcc00" };
            return { name: "Pilot", color: "#00f2ff" };
        }

        function sendMsg() {
            const inp = document.getElementById('chat-input');
            const txt = inp.value.trim();
            if(txt && currentUser) {
                db.ref('chat').push({ 
                    u: currentUser.name, 
                    t: txt, 
                    v: currentUser.isVIP, 
                    ts: firebase.database.ServerValue.TIMESTAMP 
                });
                inp.value = "";
            }
        }

        function listenChat() {
            db.ref('chat').limitToLast(12).on('value', snap => {
                const box = document.getElementById('chat-messages');
                box.innerHTML = "";
                snap.forEach(c => {
                    const m = c.val();
                    const d = document.createElement('div');
                    d.className = "chat-msg";
                    d.innerHTML = `<span class="chat-user" style="color:${m.v ? 'var(--neon-green)':'var(--neon-blue)'}">${m.u}:</span> ${m.t}`;
                    box.appendChild(d);
                });
                box.scrollTop = box.scrollHeight;
            });
        }

        function show(id) {
            document.querySelectorAll('.card').forEach(c => c.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }

        function toggleAuth(isLogin) {
            document.getElementById('auth-reg').classList.toggle('hidden', isLogin);
            document.getElementById('auth-login').classList.toggle('hidden', !isLogin);
        }

        function register() {
            let name = document.getElementById('reg-name').value;
            if(name.length < 3) return alert("Ad qÄ±sadÄ±r!");
            let id = "BIT-" + Math.floor(1000 + Math.random() * 9000);
            let newUser = { id, name, bits: 0, limit: 2, isVIP: false, lastLogin: Date.now() };
            db.ref('users/' + id).set(newUser).then(() => loginWithUser(newUser));
        }

        function login() {
            let id = document.getElementById('login-id').value.toUpperCase();
            db.ref('users/' + id).once('value', s => s.exists() ? loginWithUser(s.val()) : alert("TapÄ±lmadÄ±!"));
        }

        function loginWithUser(user) {
            currentUser = user;
            localStorage.setItem('bb_user_id', user.id);
            checkBonusAvailability();
            updateDash();
            show('scr-dash');
            startLeaderboardSync();
            listenChat();
        }

        function checkBonusAvailability() {
            const today = new Date().toDateString();
            const lastDate = currentUser.lastBonusDate || "";
            const giftBtn = document.getElementById('gift-trigger');
            if(today === lastDate) { giftBtn.style.display = "none"; } 
            else { giftBtn.style.display = "inline-flex"; }
        }

        function claimDailyBonus() {
            const today = new Date().toDateString();
            currentUser.limit += 2;
            currentUser.lastBonusDate = today;
            saveToDB();
            updateDash();
            checkBonusAvailability();
            sfx.correct.play();
            alert("TÉ™briklÉ™r! GÃ¼ndÉ™lik +2 Limit HÉ™diyyÉ™ Edildi ğŸ");
        }

        function updateDash() {
            if(!currentUser) return;
            const rank = getRank(currentUser.bits);
            document.getElementById('u-id').innerText = currentUser.id;
            document.getElementById('u-welcome').innerText = currentUser.name;
            document.getElementById('u-bits').innerText = currentUser.bits;
            document.getElementById('u-limit').innerText = currentUser.isVIP ? "âˆ" : currentUser.limit + "/2";
            
            const rTag = document.getElementById('u-rank');
            rTag.innerText = rank.name;
            rTag.style.background = rank.color;
            rTag.style.color = "black";

            let container = document.getElementById('btn-container');
            container.innerHTML = (!currentUser.isVIP && currentUser.limit <= 0) ? 
                `<button class="btn btn-wa pulse-btn" onclick="contactAdmin()">LÄ°MÄ°TSÄ°Z AL</button>` : 
                `<button class="btn pulse-btn" onclick="startGame()">DÃ–YÃœÅÆ BAÅLA</button>`;
        }

        function startLeaderboardSync() {
            db.ref('users').orderByChild('bits').limitToLast(10).on('value', (snapshot) => {
                let list = []; snapshot.forEach(child => { list.push(child.val()); });
                list.reverse();
                let html = "";
                list.forEach((u, i) => {
                    const rank = getRank(u.bits);
                    html += `<div class="leader-item">
                        <span>${i+1}. ${u.name} <small style="color:${rank.color}">[${rank.name}]</small>${u.isVIP ? '<span class="vip-tag">VIP</span>' : ''}</span>
                        <span style="color:var(--neon-blue)">${u.bits}</span>
                    </div>`;
                });
                document.getElementById('leader-list').innerHTML = html;
            });
        }

        function startGame() {
            if(!currentUser.isVIP) { currentUser.limit--; saveToDB(); }
            show('scr-game'); loadQuestion();
        }

        function loadQuestion() {
            clearInterval(gameTimer);
            let time = 10;
            document.getElementById('timer').innerText = time;
            document.getElementById('timer').style.color = "var(--neon-green)";
            
            let q = questions[Math.floor(Math.random()*questions.length)];
            document.getElementById('q-text').innerText = q.q;
            let opts = document.getElementById('q-opts');
            opts.innerHTML = "";
            
            q.o.forEach((o, i) => {
                let b = document.createElement('button'); b.className = "opt-btn"; b.innerText = o;
                b.onclick = () => {
                    if(i === q.c) { 
                        sfx.correct.play();
                        currentUser.bits += 50; 
                        saveToDB(); 
                        loadQuestion(); 
                    } else { 
                        sfx.wrong.play();
                        alert("YALNIÅ!"); 
                        show('scr-dash'); 
                        updateDash(); 
                    }
                };
                opts.appendChild(b);
            });
            
            gameTimer = setInterval(() => {
                time--; 
                document.getElementById('timer').innerText = time;
                if(time <= 3) document.getElementById('timer').style.color = "red";
                if(time <= 0) { 
                    sfx.wrong.play();
                    clearInterval(gameTimer); 
                    show('scr-dash'); 
                    updateDash(); 
                }
            }, 1000);
        }

        function saveToDB() { if(currentUser) db.ref('users/' + currentUser.id).update(currentUser); }
        function logout() { localStorage.removeItem('bb_user_id'); location.reload(); }
        function contactAdmin() { window.open(`https://wa.me/994773220807?text=ID: ${currentUser.id} limit istÉ™yirÉ™m`, '_blank'); }
        
        function adminClick() { 
            adminClicks++; 
            if(adminClicks >= 5) { 
                adminClicks = 0; show('scr-admin'); 
                db.ref('users').once('value', s => { document.getElementById('admin-count').innerText = "CÉ™mi Ä°stifadÉ™Ã§i: " + s.numChildren(); });
            } 
        }

        function checkAdmin() {
            let pass = document.getElementById('admin-pass').value;
            db.ref('settings/adminPass').once('value', s => {
                if(s.exists() && s.val() === pass) document.getElementById('admin-tools').classList.remove('hidden');
                else alert("SÉ™hv!");
            });
        }

        function makeVIP() {
            let tid = document.getElementById('target-id').value.toUpperCase();
            db.ref('users/' + tid).update({ isVIP: true }).then(() => alert("VIP aktiv edildi!"));
        }

        window.onload = () => {
            let savedId = localStorage.getItem('bb_user_id');
            if(savedId) db.ref('users/' + savedId).once('value', s => s.exists() ? loginWithUser(s.val()) : startLeaderboardSync());
            else startLeaderboardSync();
        }

        document.getElementById('chat-input')?.addEventListener('keypress', (e) => { if(e.key === 'Enter') sendMsg(); });
    </script>
</body>
</html>
